<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="generator" content="Hugo 0.26" />

  <title>Configure new servers with the basics via Ansible &middot; Sandors Systems Scribbles</title>

  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/pure-min.css">

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-old-ie-min.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-min.css">
  <!--<![endif]-->

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://theargo.io/css/side-menu-old-ie.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://theargo.io/css/side-menu.css">
  <!--<![endif]-->

  <link rel="stylesheet" href="https://theargo.io/css/blackburn.css">

  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

  
  <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet" type="text/css">

  
  

  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.1.0/styles/androidstudio.min.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.1.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  

  <link rel="shortcut icon" href="https://theargo.io/img/favicon.ico" type="image/x-icon" />

</head>


<body>
<div id="layout">

  
<a href="#menu" id="menuLink" class="menu-link">
  
  <span></span>
</a>
<div id="menu">

  
  <a class="pure-menu-heading brand" href="https://theargo.io/">Scribbles</a>


  <div class="pure-menu">
    <ul class="pure-menu-list">
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://theargo.io/post/"><i class='fa fa-list fa-fw'></i>Posts</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://theargo.io/about/"><i class='fa fa-user fa-fw'></i>About</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://theargo.io/"><i class='fa fa-home fa-fw'></i>Home</a>
      
        </li>
      
    </ul>
  </div>

  <div class="pure-menu social">
  <ul class="pure-menu-list">

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://twitter.com/e30chris" target="_blank"><i class="fa fa-twitter-square fa-fw"></i>Twitter</a>
    </li>
    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://quitter.se/e30chris" target="_blank"><i class="fa fa-comment fa-fw"></i>GNU social</a>
    </li>
    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://linkedin.com/in/clivermore" target="_blank"><i class="fa fa-linkedin-square fa-fw"></i>LinkedIn</a>
    </li>
    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://github.com/e30chris" target="_blank"><i class="fa fa-github-square fa-fw"></i>GitHub</a>
    </li>
    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://keybase.io/e30chris" target="_blank"><i class="fa fa-key fa-fw"></i>Keybase</a>
    </li>
    

  </ul>
</div>


  <div>
  <div class="small-print">
    <small>&copy; 2017. All rights reserved.</small>
  </div>
  <div class="small-print">
    <small>Built with&nbsp;<a href="https://gohugo.io/" target="_blank">Hugo</a></small>
    <small>Theme&nbsp;<a href="https://github.com/yoshiharuyamashita/blackburn" target="_blank">Blackburn</a></small>
  </div>
</div>

</div>


  <div id="main">


<div class="header">
  <h1>Configure new servers with the basics via Ansible</h1>
  <h2></h2>
</div>
<div class="content">

  <div class="post-meta">

  <div>
    <i class="fa fa-calendar fa-fw"></i>
    <time>08 Jul 2015, 00:00</time>
  </div>

  

  

  
  
  
  <div>
    <i class="fa fa-tags fa-fw"></i>
    
      <a class="post-taxonomy-tag" href="https://theargo.io/tags/ansible">ansible</a>&nbsp;&#47;
    
      <a class="post-taxonomy-tag" href="https://theargo.io/tags/infrastructure-culture">infrastructure culture</a>
    
  </div>
  
  

</div>

  

<h2 id="the-problem">The Problem:</h2>

<p>You have a throw away server that you only need for the next couple of hours to try something out.  You need the server configured so that you can login and get to work without messing with yum updates or adding your user and public ssh keys to access it.</p>

<h2 id="the-solution">The solution:</h2>

<p>This Ansible playbook that is simple and to the point.  It updates yum or apt, applies a sane sshd config, adds users and groups and then gets your public ssh key onto the throwaway box so you can login without a password.</p>

<p><a href="https://github.com/e30chris/Ansible-ServerDelivery">GitHub - e30chris/ServerDelivery</a></p>

<h3 id="backstory">Backstory:</h3>

<p>After pitching Ansible as a great solution to infrastructure automation I wanted a simple playbook to demo that would show off the simplest side of Ansible.  I also need the short lived servers I spin up on Digital Ocean to be secured and easy to login to without any manual steps.  This playbook takes care of both requirements.</p>

<h3 id="todo">ToDo:</h3>

<ul>
<li>Add a role to this playbook to kick off the droplet creation and then register the names and IP&rsquo;s for the new servers before handing off to this current playbook config.</li>
</ul>

<hr />

<h3 id="pre-requisites">Pre-Requisites</h3>

<ul>
<li>Servers booted and running</li>
<li>SSH access</li>
<li>SSH public keys for each user in files/</li>
<li>Server OS is in the Debian family or the RedHat family.</li>
</ul>

<h3 id="create-the-new-droplets">Create the new droplets</h3>

<p>Using the excellent Digital Ocean cli tool - <a href="https://github.com/pearkes/tugboat">TugBoat - GitHub</a></p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%">sandor@pineApplez<span style="color: #f8f8f2">$ </span>tugboat create bloggindroplet -s <span style="color: #ae81ff">66</span> -i <span style="color: #ae81ff">10322623</span> -r <span style="color: #ae81ff">3</span> -k 915832
</pre></div>


<p>That equals:</p>

<p>-s size (66 = 512 mb)</p>

<p>-i image (Centos 7 x64)</p>

<p>-r region (San Francisco)</p>

<p>-k ssh public key (mine)</p>

<h3 id="add-new-droplet-to-ssh-config">Add new droplet to SSH config</h3>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%">sandor@pineApplez<span style="color: #f8f8f2">$ </span>cat ~/.ssh/config
<span style="color: #75715e">#SSH Stuff</span>
Host bloggindroplet
  Hostname 45.55.7.178
  User root
Host *
  ServerAliveInterval 60
  ServerAliveCountMax 30
  ControlMaster auto
  ControlPath ~/.ssh/connections/ssh-%r@%h:%p
  ControlPersist 4h
  StrictHostKeyChecking no
  IdentityFile ~/.ssh/id_rsa
</pre></div>


<h3 id="add-new-droplet-to-ansible-hosts-file">Add new droplet to Ansible hosts file</h3>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%">sandor@pineApplez<span style="color: #f8f8f2">$ </span>› cat ~/.ansible/hosts
<span style="color: #75715e"># All Servers</span>
docks
cent7
fed22

<span style="color: #75715e"># App servers</span>
<span style="color: #f92672">[</span>app<span style="color: #f92672">]</span>

<span style="color: #75715e"># DB servers</span>
<span style="color: #f92672">[</span>db<span style="color: #f92672">]</span>

<span style="color: #75715e"># Group &#39;multi&#39; with all servers</span>
<span style="color: #f92672">[</span>multi:children<span style="color: #f92672">]</span>

<span style="color: #75715e"># Variables applied to all servers</span>
<span style="color: #f92672">[</span>multi:vars<span style="color: #f92672">]</span>
</pre></div>


<h3 id="test-ssh-login">Test ssh login</h3>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%">sandor@pineApplez<span style="color: #f8f8f2">$ </span>ssh bloggindroplet
Last login: Thu Jul  <span style="color: #ae81ff">9</span> 00:34:41 <span style="color: #ae81ff">2015</span> from 67.135.32.227
<span style="color: #f92672">[</span>root@bloggindroplet ~<span style="color: #f92672">]</span><span style="color: #75715e">#</span>
</pre></div>


<h3 id="test-ansible">Test Ansible</h3>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%">sandor@pineApplez<span style="color: #f8f8f2">$ </span>ansible bloggindroplet -m ping
servfed <span style="color: #f8f8f2">|</span> success &gt;&gt; <span style="color: #f92672">{</span>
    <span style="color: #e6db74">&quot;changed&quot;</span>: <span style="color: #f8f8f2">false</span>,
    <span style="color: #e6db74">&quot;ping&quot;</span>: <span style="color: #e6db74">&quot;pong&quot;</span>
<span style="color: #f92672">}</span>
sandor@pineApplez<span style="color: #960050; background-color: #1e0010">$</span>
</pre></div>


<h3 id="git-clone-the-playbook">git clone the playbook</h3>

<p>Download:</p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%">sandor@pineApplez<span style="color: #f8f8f2">$ </span>git clone git@github.com:e30chris/Ansible-ServerDelivery.git ~/Codestuff/Ansible/.
</pre></div>


<h3 id="create-the-user-accounts">Create the user accounts</h3>

<p>via the variables in group_vars/main.yml</p>

<p><em>delivered_users: this is the user accounts you want created on the new server, each with sudo access.</em></p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span style="color: #f8f8f2">---</span>
<span style="color: #75715e"># vars file for ServerDelivery</span>
<span style="color: #ae81ff">delivered_users</span><span style="color: #f8f8f2">:</span>
  <span style="color: #f8f8f2">-</span> <span style="color: #ae81ff">chrisl</span>
  <span style="color: #f8f8f2">-</span> <span style="color: #ae81ff">dpr</span>
  <span style="color: #f8f8f2">-</span> <span style="color: #ae81ff">weev</span>
</pre></div>


<h3 id="give-each-users-ssh-key-a-password">Give each users ssh key a password</h3>

<h4 id="and-encrypt-it-with-ansible-vault">and encrypt it with Ansible Vault</h4>

<p>via group_vars/passes.yml</p>

<p><em>this file will need to be created with ansible-vault</em></p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%">sandor@pineApplez<span style="color: #f8f8f2">$ </span>ansible-vault create group_vars/passes.yml
---
<span style="color: #75715e"># vars file for ServerDelivery encrypted via ansible-vault</span>
users_ssh_key_pass: stallman was right
</pre></div>


<h3 id="run-the-playbook">Run the playbook</h3>

<p><em>This will run with &lsquo;hosts: all&rsquo; which will put every server in your Ansible hosts file in this state.  This should be ok since all this playbook does is ensure sane security, adds users and updates packages.  Because Ansible is idempotent if these setting have not changed then nothing will be done.  If you do not want to run on all your hosts then specify that with either a group in the Ansible hosts file or with a cli switch.</em></p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%">sandor@pineApplez<span style="color: #f8f8f2">$ </span>ansible-playbook site.yml -vv --ask-vault-pass
</pre></div>


<p>which returns lots of cows:</p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%">2.2.3 in ServerDelivery/ on dev
› ansible-playbook -i <span style="color: #e6db74">&quot;docks,cent7,fed22,&quot;</span> site.yml --ask-vault-pass
Vault password:
 ____________
&lt; PLAY <span style="color: #f92672">[</span>all<span style="color: #f92672">]</span> &gt;
 ------------
        <span style="color: #ae81ff">\ </span>  ^__^
         <span style="color: #ae81ff">\ </span> <span style="color: #f92672">(</span>oo<span style="color: #f92672">)</span><span style="color: #ae81ff">\_</span>______
            <span style="color: #f92672">(</span>__<span style="color: #f92672">)</span><span style="color: #ae81ff">\ </span>      <span style="color: #f92672">)</span><span style="color: #ae81ff">\/\</span>
                <span style="color: #f92672">||</span>----w <span style="color: #f8f8f2">|</span>
                <span style="color: #f92672">||</span>     <span style="color: #f92672">||</span>


 _________________
&lt; GATHERING FACTS &gt;
 -----------------
        <span style="color: #ae81ff">\ </span>  ^__^
         <span style="color: #ae81ff">\ </span> <span style="color: #f92672">(</span>oo<span style="color: #f92672">)</span><span style="color: #ae81ff">\_</span>______
            <span style="color: #f92672">(</span>__<span style="color: #f92672">)</span><span style="color: #ae81ff">\ </span>      <span style="color: #f92672">)</span><span style="color: #ae81ff">\/\</span>
                <span style="color: #f92672">||</span>----w <span style="color: #f8f8f2">|</span>
                <span style="color: #f92672">||</span>     <span style="color: #f92672">||</span>


ok: <span style="color: #f92672">[</span>fed22<span style="color: #f92672">]</span>
ok: <span style="color: #f92672">[</span>cent7<span style="color: #f92672">]</span>
ok: <span style="color: #f92672">[</span>docks<span style="color: #f92672">]</span>
docks: importing group_vars/Ubuntu.yml
cent7: importing group_vars/CentOS.yml
fed22: importing group_vars/Fedora.yml
 _____________________________________
&lt; TASK: update all packages on CentOS &gt;
 -------------------------------------
        <span style="color: #ae81ff">\ </span>  ^__^
         <span style="color: #ae81ff">\ </span> <span style="color: #f92672">(</span>oo<span style="color: #f92672">)</span><span style="color: #ae81ff">\_</span>______
            <span style="color: #f92672">(</span>__<span style="color: #f92672">)</span><span style="color: #ae81ff">\ </span>      <span style="color: #f92672">)</span><span style="color: #ae81ff">\/\</span>
                <span style="color: #f92672">||</span>----w <span style="color: #f8f8f2">|</span>
                <span style="color: #f92672">||</span>     <span style="color: #f92672">||</span>


skipping: <span style="color: #f92672">[</span>docks<span style="color: #f92672">]</span>
skipping: <span style="color: #f92672">[</span>fed22<span style="color: #f92672">]</span>
skipping: <span style="color: #f92672">[</span>cent7<span style="color: #f92672">]</span>
 _______________________________
&lt; TASK: install EPEL <span style="color: #66d9ef">for</span> CentOS &gt;
 -------------------------------
        <span style="color: #ae81ff">\ </span>  ^__^
         <span style="color: #ae81ff">\ </span> <span style="color: #f92672">(</span>oo<span style="color: #f92672">)</span><span style="color: #ae81ff">\_</span>______
            <span style="color: #f92672">(</span>__<span style="color: #f92672">)</span><span style="color: #ae81ff">\ </span>      <span style="color: #f92672">)</span><span style="color: #ae81ff">\/\</span>
                <span style="color: #f92672">||</span>----w <span style="color: #f8f8f2">|</span>
                <span style="color: #f92672">||</span>     <span style="color: #f92672">||</span>


skipping: <span style="color: #f92672">[</span>cent7<span style="color: #f92672">]</span>
skipping: <span style="color: #f92672">[</span>fed22<span style="color: #f92672">]</span>
skipping: <span style="color: #f92672">[</span>docks<span style="color: #f92672">]</span>
 ________________________________________
&lt; TASK: add the must have apps on CentOS &gt;
 ----------------------------------------
        <span style="color: #ae81ff">\ </span>  ^__^
         <span style="color: #ae81ff">\ </span> <span style="color: #f92672">(</span>oo<span style="color: #f92672">)</span><span style="color: #ae81ff">\_</span>______
            <span style="color: #f92672">(</span>__<span style="color: #f92672">)</span><span style="color: #ae81ff">\ </span>      <span style="color: #f92672">)</span><span style="color: #ae81ff">\/\</span>
                <span style="color: #f92672">||</span>----w <span style="color: #f8f8f2">|</span>
                <span style="color: #f92672">||</span>     <span style="color: #f92672">||</span>


skipping: <span style="color: #f92672">[</span>cent7<span style="color: #f92672">]</span>
skipping: <span style="color: #f92672">[</span>docks<span style="color: #f92672">]</span>
skipping: <span style="color: #f92672">[</span>fed22<span style="color: #f92672">]</span>
 ____________________________________________
&lt; TASK: update all packages on Ubuntu family &gt;
 --------------------------------------------
        <span style="color: #ae81ff">\ </span>  ^__^
         <span style="color: #ae81ff">\ </span> <span style="color: #f92672">(</span>oo<span style="color: #f92672">)</span><span style="color: #ae81ff">\_</span>______
            <span style="color: #f92672">(</span>__<span style="color: #f92672">)</span><span style="color: #ae81ff">\ </span>      <span style="color: #f92672">)</span><span style="color: #ae81ff">\/\</span>
                <span style="color: #f92672">||</span>----w <span style="color: #f8f8f2">|</span>
                <span style="color: #f92672">||</span>     <span style="color: #f92672">||</span>


skipping: <span style="color: #f92672">[</span>cent7<span style="color: #f92672">]</span>
skipping: <span style="color: #f92672">[</span>fed22<span style="color: #f92672">]</span>
ok: <span style="color: #f92672">[</span>docks<span style="color: #f92672">]</span>
 ________________________________________
&lt; TASK: add the must have apps on Ubuntu &gt;
 ----------------------------------------
        <span style="color: #ae81ff">\ </span>  ^__^
         <span style="color: #ae81ff">\ </span> <span style="color: #f92672">(</span>oo<span style="color: #f92672">)</span><span style="color: #ae81ff">\_</span>______
            <span style="color: #f92672">(</span>__<span style="color: #f92672">)</span><span style="color: #ae81ff">\ </span>      <span style="color: #f92672">)</span><span style="color: #ae81ff">\/\</span>
                <span style="color: #f92672">||</span>----w <span style="color: #f8f8f2">|</span>
                <span style="color: #f92672">||</span>     <span style="color: #f92672">||</span>


skipping: <span style="color: #f92672">[</span>cent7<span style="color: #f92672">]</span>
skipping: <span style="color: #f92672">[</span>fed22<span style="color: #f92672">]</span>
ok: <span style="color: #f92672">[</span>docks<span style="color: #f92672">]</span> <span style="color: #f92672">=</span>&gt; <span style="color: #f92672">(</span><span style="color: #f8f8f2">item</span><span style="color: #f92672">=</span>sudo,vim,htop,tmux,unzip,fail2ban<span style="color: #f92672">)</span>
 _____________________________________
&lt; TASK: update all packages on Fedora &gt;
 -------------------------------------
        <span style="color: #ae81ff">\ </span>  ^__^
         <span style="color: #ae81ff">\ </span> <span style="color: #f92672">(</span>oo<span style="color: #f92672">)</span><span style="color: #ae81ff">\_</span>______
            <span style="color: #f92672">(</span>__<span style="color: #f92672">)</span><span style="color: #ae81ff">\ </span>      <span style="color: #f92672">)</span><span style="color: #ae81ff">\/\</span>
                <span style="color: #f92672">||</span>----w <span style="color: #f8f8f2">|</span>
                <span style="color: #f92672">||</span>     <span style="color: #f92672">||</span>


skipping: <span style="color: #f92672">[</span>docks<span style="color: #f92672">]</span>
skipping: <span style="color: #f92672">[</span>cent7<span style="color: #f92672">]</span>
ok: <span style="color: #f92672">[</span>fed22<span style="color: #f92672">]</span>
 ________________________________________
&lt; TASK: add the must have apps on Fedora &gt;
 ----------------------------------------
        <span style="color: #ae81ff">\ </span>  ^__^
         <span style="color: #ae81ff">\ </span> <span style="color: #f92672">(</span>oo<span style="color: #f92672">)</span><span style="color: #ae81ff">\_</span>______
            <span style="color: #f92672">(</span>__<span style="color: #f92672">)</span><span style="color: #ae81ff">\ </span>      <span style="color: #f92672">)</span><span style="color: #ae81ff">\/\</span>
                <span style="color: #f92672">||</span>----w <span style="color: #f8f8f2">|</span>
                <span style="color: #f92672">||</span>     <span style="color: #f92672">||</span>


skipping: <span style="color: #f92672">[</span>docks<span style="color: #f92672">]</span>
skipping: <span style="color: #f92672">[</span>cent7<span style="color: #f92672">]</span>
ok: <span style="color: #f92672">[</span>fed22<span style="color: #f92672">]</span> <span style="color: #f92672">=</span>&gt; <span style="color: #f92672">(</span><span style="color: #f8f8f2">item</span><span style="color: #f92672">=</span>sudo,vim,htop,tmux,unzip,fail2ban<span style="color: #f92672">)</span>
 _______________________________
&lt; TASK: adding users to servers &gt;
 -------------------------------
        <span style="color: #ae81ff">\ </span>  ^__^
         <span style="color: #ae81ff">\ </span> <span style="color: #f92672">(</span>oo<span style="color: #f92672">)</span><span style="color: #ae81ff">\_</span>______
            <span style="color: #f92672">(</span>__<span style="color: #f92672">)</span><span style="color: #ae81ff">\ </span>      <span style="color: #f92672">)</span><span style="color: #ae81ff">\/\</span>
                <span style="color: #f92672">||</span>----w <span style="color: #f8f8f2">|</span>
                <span style="color: #f92672">||</span>     <span style="color: #f92672">||</span>


ok: <span style="color: #f92672">[</span>docks<span style="color: #f92672">]</span> <span style="color: #f92672">=</span>&gt; <span style="color: #f92672">(</span><span style="color: #f8f8f2">item</span><span style="color: #f92672">=</span>chrisl<span style="color: #f92672">)</span>
ok: <span style="color: #f92672">[</span>fed22<span style="color: #f92672">]</span> <span style="color: #f92672">=</span>&gt; <span style="color: #f92672">(</span><span style="color: #f8f8f2">item</span><span style="color: #f92672">=</span>chrisl<span style="color: #f92672">)</span>
ok: <span style="color: #f92672">[</span>cent7<span style="color: #f92672">]</span> <span style="color: #f92672">=</span>&gt; <span style="color: #f92672">(</span><span style="color: #f8f8f2">item</span><span style="color: #f92672">=</span>chrisl<span style="color: #f92672">)</span>
ok: <span style="color: #f92672">[</span>docks<span style="color: #f92672">]</span> <span style="color: #f92672">=</span>&gt; <span style="color: #f92672">(</span><span style="color: #f8f8f2">item</span><span style="color: #f92672">=</span>dpr<span style="color: #f92672">)</span>
ok: <span style="color: #f92672">[</span>fed22<span style="color: #f92672">]</span> <span style="color: #f92672">=</span>&gt; <span style="color: #f92672">(</span><span style="color: #f8f8f2">item</span><span style="color: #f92672">=</span>dpr<span style="color: #f92672">)</span>
ok: <span style="color: #f92672">[</span>cent7<span style="color: #f92672">]</span> <span style="color: #f92672">=</span>&gt; <span style="color: #f92672">(</span><span style="color: #f8f8f2">item</span><span style="color: #f92672">=</span>dpr<span style="color: #f92672">)</span>
ok: <span style="color: #f92672">[</span>cent7<span style="color: #f92672">]</span> <span style="color: #f92672">=</span>&gt; <span style="color: #f92672">(</span><span style="color: #f8f8f2">item</span><span style="color: #f92672">=</span>weev<span style="color: #f92672">)</span>
ok: <span style="color: #f92672">[</span>fed22<span style="color: #f92672">]</span> <span style="color: #f92672">=</span>&gt; <span style="color: #f92672">(</span><span style="color: #f8f8f2">item</span><span style="color: #f92672">=</span>weev<span style="color: #f92672">)</span>
ok: <span style="color: #f92672">[</span>docks<span style="color: #f92672">]</span> <span style="color: #f92672">=</span>&gt; <span style="color: #f92672">(</span><span style="color: #f8f8f2">item</span><span style="color: #f92672">=</span>weev<span style="color: #f92672">)</span>
 _________________________________
&lt; TASK: add users ssh public keys &gt;
 ---------------------------------
        <span style="color: #ae81ff">\ </span>  ^__^
         <span style="color: #ae81ff">\ </span> <span style="color: #f92672">(</span>oo<span style="color: #f92672">)</span><span style="color: #ae81ff">\_</span>______
            <span style="color: #f92672">(</span>__<span style="color: #f92672">)</span><span style="color: #ae81ff">\ </span>      <span style="color: #f92672">)</span><span style="color: #ae81ff">\/\</span>
                <span style="color: #f92672">||</span>----w <span style="color: #f8f8f2">|</span>
                <span style="color: #f92672">||</span>     <span style="color: #f92672">||</span>


ok: <span style="color: #f92672">[</span>fed22<span style="color: #f92672">]</span> <span style="color: #f92672">=</span>&gt; <span style="color: #f92672">(</span><span style="color: #f8f8f2">item</span><span style="color: #f92672">=</span>chrisl<span style="color: #f92672">)</span>
ok: <span style="color: #f92672">[</span>cent7<span style="color: #f92672">]</span> <span style="color: #f92672">=</span>&gt; <span style="color: #f92672">(</span><span style="color: #f8f8f2">item</span><span style="color: #f92672">=</span>chrisl<span style="color: #f92672">)</span>
ok: <span style="color: #f92672">[</span>docks<span style="color: #f92672">]</span> <span style="color: #f92672">=</span>&gt; <span style="color: #f92672">(</span><span style="color: #f8f8f2">item</span><span style="color: #f92672">=</span>chrisl<span style="color: #f92672">)</span>
ok: <span style="color: #f92672">[</span>fed22<span style="color: #f92672">]</span> <span style="color: #f92672">=</span>&gt; <span style="color: #f92672">(</span><span style="color: #f8f8f2">item</span><span style="color: #f92672">=</span>dpr<span style="color: #f92672">)</span>
ok: <span style="color: #f92672">[</span>docks<span style="color: #f92672">]</span> <span style="color: #f92672">=</span>&gt; <span style="color: #f92672">(</span><span style="color: #f8f8f2">item</span><span style="color: #f92672">=</span>dpr<span style="color: #f92672">)</span>
ok: <span style="color: #f92672">[</span>cent7<span style="color: #f92672">]</span> <span style="color: #f92672">=</span>&gt; <span style="color: #f92672">(</span><span style="color: #f8f8f2">item</span><span style="color: #f92672">=</span>dpr<span style="color: #f92672">)</span>
ok: <span style="color: #f92672">[</span>fed22<span style="color: #f92672">]</span> <span style="color: #f92672">=</span>&gt; <span style="color: #f92672">(</span><span style="color: #f8f8f2">item</span><span style="color: #f92672">=</span>weev<span style="color: #f92672">)</span>
ok: <span style="color: #f92672">[</span>docks<span style="color: #f92672">]</span> <span style="color: #f92672">=</span>&gt; <span style="color: #f92672">(</span><span style="color: #f8f8f2">item</span><span style="color: #f92672">=</span>weev<span style="color: #f92672">)</span>
ok: <span style="color: #f92672">[</span>cent7<span style="color: #f92672">]</span> <span style="color: #f92672">=</span>&gt; <span style="color: #f92672">(</span><span style="color: #f8f8f2">item</span><span style="color: #f92672">=</span>weev<span style="color: #f92672">)</span>
 _______________________
&lt; TASK: add admin group &gt;
 -----------------------
        <span style="color: #ae81ff">\ </span>  ^__^
         <span style="color: #ae81ff">\ </span> <span style="color: #f92672">(</span>oo<span style="color: #f92672">)</span><span style="color: #ae81ff">\_</span>______
            <span style="color: #f92672">(</span>__<span style="color: #f92672">)</span><span style="color: #ae81ff">\ </span>      <span style="color: #f92672">)</span><span style="color: #ae81ff">\/\</span>
                <span style="color: #f92672">||</span>----w <span style="color: #f8f8f2">|</span>
                <span style="color: #f92672">||</span>     <span style="color: #f92672">||</span>


ok: <span style="color: #f92672">[</span>docks<span style="color: #f92672">]</span>
ok: <span style="color: #f92672">[</span>fed22<span style="color: #f92672">]</span>
ok: <span style="color: #f92672">[</span>cent7<span style="color: #f92672">]</span>
 ________________________________
&lt; TASK: add users to admin group &gt;
 --------------------------------
        <span style="color: #ae81ff">\ </span>  ^__^
         <span style="color: #ae81ff">\ </span> <span style="color: #f92672">(</span>oo<span style="color: #f92672">)</span><span style="color: #ae81ff">\_</span>______
            <span style="color: #f92672">(</span>__<span style="color: #f92672">)</span><span style="color: #ae81ff">\ </span>      <span style="color: #f92672">)</span><span style="color: #ae81ff">\/\</span>
                <span style="color: #f92672">||</span>----w <span style="color: #f8f8f2">|</span>
                <span style="color: #f92672">||</span>     <span style="color: #f92672">||</span>


ok: <span style="color: #f92672">[</span>cent7<span style="color: #f92672">]</span> <span style="color: #f92672">=</span>&gt; <span style="color: #f92672">(</span><span style="color: #f8f8f2">item</span><span style="color: #f92672">=</span>chrisl<span style="color: #f92672">)</span>
ok: <span style="color: #f92672">[</span>fed22<span style="color: #f92672">]</span> <span style="color: #f92672">=</span>&gt; <span style="color: #f92672">(</span><span style="color: #f8f8f2">item</span><span style="color: #f92672">=</span>chrisl<span style="color: #f92672">)</span>
ok: <span style="color: #f92672">[</span>docks<span style="color: #f92672">]</span> <span style="color: #f92672">=</span>&gt; <span style="color: #f92672">(</span><span style="color: #f8f8f2">item</span><span style="color: #f92672">=</span>chrisl<span style="color: #f92672">)</span>
ok: <span style="color: #f92672">[</span>cent7<span style="color: #f92672">]</span> <span style="color: #f92672">=</span>&gt; <span style="color: #f92672">(</span><span style="color: #f8f8f2">item</span><span style="color: #f92672">=</span>dpr<span style="color: #f92672">)</span>
ok: <span style="color: #f92672">[</span>fed22<span style="color: #f92672">]</span> <span style="color: #f92672">=</span>&gt; <span style="color: #f92672">(</span><span style="color: #f8f8f2">item</span><span style="color: #f92672">=</span>dpr<span style="color: #f92672">)</span>
ok: <span style="color: #f92672">[</span>docks<span style="color: #f92672">]</span> <span style="color: #f92672">=</span>&gt; <span style="color: #f92672">(</span><span style="color: #f8f8f2">item</span><span style="color: #f92672">=</span>dpr<span style="color: #f92672">)</span>
ok: <span style="color: #f92672">[</span>cent7<span style="color: #f92672">]</span> <span style="color: #f92672">=</span>&gt; <span style="color: #f92672">(</span><span style="color: #f8f8f2">item</span><span style="color: #f92672">=</span>weev<span style="color: #f92672">)</span>
ok: <span style="color: #f92672">[</span>fed22<span style="color: #f92672">]</span> <span style="color: #f92672">=</span>&gt; <span style="color: #f92672">(</span><span style="color: #f8f8f2">item</span><span style="color: #f92672">=</span>weev<span style="color: #f92672">)</span>
ok: <span style="color: #f92672">[</span>docks<span style="color: #f92672">]</span> <span style="color: #f92672">=</span>&gt; <span style="color: #f92672">(</span><span style="color: #f8f8f2">item</span><span style="color: #f92672">=</span>weev<span style="color: #f92672">)</span>
 ______________________________
&lt; TASK: add users sudoers file &gt;
 ------------------------------
        <span style="color: #ae81ff">\ </span>  ^__^
         <span style="color: #ae81ff">\ </span> <span style="color: #f92672">(</span>oo<span style="color: #f92672">)</span><span style="color: #ae81ff">\_</span>______
            <span style="color: #f92672">(</span>__<span style="color: #f92672">)</span><span style="color: #ae81ff">\ </span>      <span style="color: #f92672">)</span><span style="color: #ae81ff">\/\</span>
                <span style="color: #f92672">||</span>----w <span style="color: #f8f8f2">|</span>
                <span style="color: #f92672">||</span>     <span style="color: #f92672">||</span>


ok: <span style="color: #f92672">[</span>cent7<span style="color: #f92672">]</span> <span style="color: #f92672">=</span>&gt; <span style="color: #f92672">(</span><span style="color: #f8f8f2">item</span><span style="color: #f92672">=</span>chrisl<span style="color: #f92672">)</span>
ok: <span style="color: #f92672">[</span>fed22<span style="color: #f92672">]</span> <span style="color: #f92672">=</span>&gt; <span style="color: #f92672">(</span><span style="color: #f8f8f2">item</span><span style="color: #f92672">=</span>chrisl<span style="color: #f92672">)</span>
ok: <span style="color: #f92672">[</span>docks<span style="color: #f92672">]</span> <span style="color: #f92672">=</span>&gt; <span style="color: #f92672">(</span><span style="color: #f8f8f2">item</span><span style="color: #f92672">=</span>chrisl<span style="color: #f92672">)</span>
ok: <span style="color: #f92672">[</span>cent7<span style="color: #f92672">]</span> <span style="color: #f92672">=</span>&gt; <span style="color: #f92672">(</span><span style="color: #f8f8f2">item</span><span style="color: #f92672">=</span>dpr<span style="color: #f92672">)</span>
ok: <span style="color: #f92672">[</span>fed22<span style="color: #f92672">]</span> <span style="color: #f92672">=</span>&gt; <span style="color: #f92672">(</span><span style="color: #f8f8f2">item</span><span style="color: #f92672">=</span>dpr<span style="color: #f92672">)</span>
ok: <span style="color: #f92672">[</span>docks<span style="color: #f92672">]</span> <span style="color: #f92672">=</span>&gt; <span style="color: #f92672">(</span><span style="color: #f8f8f2">item</span><span style="color: #f92672">=</span>dpr<span style="color: #f92672">)</span>
ok: <span style="color: #f92672">[</span>cent7<span style="color: #f92672">]</span> <span style="color: #f92672">=</span>&gt; <span style="color: #f92672">(</span><span style="color: #f8f8f2">item</span><span style="color: #f92672">=</span>weev<span style="color: #f92672">)</span>
ok: <span style="color: #f92672">[</span>fed22<span style="color: #f92672">]</span> <span style="color: #f92672">=</span>&gt; <span style="color: #f92672">(</span><span style="color: #f8f8f2">item</span><span style="color: #f92672">=</span>weev<span style="color: #f92672">)</span>
ok: <span style="color: #f92672">[</span>docks<span style="color: #f92672">]</span> <span style="color: #f92672">=</span>&gt; <span style="color: #f92672">(</span><span style="color: #f8f8f2">item</span><span style="color: #f92672">=</span>weev<span style="color: #f92672">)</span>
 __________________________________________
&lt; TASK: secure SSH with a sane sshd_config &gt;
 ------------------------------------------
        <span style="color: #ae81ff">\ </span>  ^__^
         <span style="color: #ae81ff">\ </span> <span style="color: #f92672">(</span>oo<span style="color: #f92672">)</span><span style="color: #ae81ff">\_</span>______
            <span style="color: #f92672">(</span>__<span style="color: #f92672">)</span><span style="color: #ae81ff">\ </span>      <span style="color: #f92672">)</span><span style="color: #ae81ff">\/\</span>
                <span style="color: #f92672">||</span>----w <span style="color: #f8f8f2">|</span>
                <span style="color: #f92672">||</span>     <span style="color: #f92672">||</span>


ok: <span style="color: #f92672">[</span>docks<span style="color: #f92672">]</span>
ok: <span style="color: #f92672">[</span>cent7<span style="color: #f92672">]</span>
ok: <span style="color: #f92672">[</span>fed22<span style="color: #f92672">]</span>
 _______________________
&lt; TASK: restarting sshd &gt;
 -----------------------
        <span style="color: #ae81ff">\ </span>  ^__^
         <span style="color: #ae81ff">\ </span> <span style="color: #f92672">(</span>oo<span style="color: #f92672">)</span><span style="color: #ae81ff">\_</span>______
            <span style="color: #f92672">(</span>__<span style="color: #f92672">)</span><span style="color: #ae81ff">\ </span>      <span style="color: #f92672">)</span><span style="color: #ae81ff">\/\</span>
                <span style="color: #f92672">||</span>----w <span style="color: #f8f8f2">|</span>
                <span style="color: #f92672">||</span>     <span style="color: #f92672">||</span>


changed: <span style="color: #f92672">[</span>cent7<span style="color: #f92672">]</span>
changed: <span style="color: #f92672">[</span>fed22<span style="color: #f92672">]</span>
changed: <span style="color: #f92672">[</span>docks<span style="color: #f92672">]</span>
 ____________
&lt; PLAY RECAP &gt;
 ------------
        <span style="color: #ae81ff">\ </span>  ^__^
         <span style="color: #ae81ff">\ </span> <span style="color: #f92672">(</span>oo<span style="color: #f92672">)</span><span style="color: #ae81ff">\_</span>______
            <span style="color: #f92672">(</span>__<span style="color: #f92672">)</span><span style="color: #ae81ff">\ </span>      <span style="color: #f92672">)</span><span style="color: #ae81ff">\/\</span>
                <span style="color: #f92672">||</span>----w <span style="color: #f8f8f2">|</span>
                <span style="color: #f92672">||</span>     <span style="color: #f92672">||</span>


cent7                      : <span style="color: #f8f8f2">ok</span><span style="color: #f92672">=</span><span style="color: #ae81ff">8</span>    <span style="color: #f8f8f2">changed</span><span style="color: #f92672">=</span><span style="color: #ae81ff">1</span>    <span style="color: #f8f8f2">unreachable</span><span style="color: #f92672">=</span><span style="color: #ae81ff">0</span>    <span style="color: #f8f8f2">failed</span><span style="color: #f92672">=</span>0
docks                      : <span style="color: #f8f8f2">ok</span><span style="color: #f92672">=</span><span style="color: #ae81ff">10</span>   <span style="color: #f8f8f2">changed</span><span style="color: #f92672">=</span><span style="color: #ae81ff">1</span>    <span style="color: #f8f8f2">unreachable</span><span style="color: #f92672">=</span><span style="color: #ae81ff">0</span>    <span style="color: #f8f8f2">failed</span><span style="color: #f92672">=</span>0
fed22                      : <span style="color: #f8f8f2">ok</span><span style="color: #f92672">=</span><span style="color: #ae81ff">10</span>   <span style="color: #f8f8f2">changed</span><span style="color: #f92672">=</span><span style="color: #ae81ff">1</span>    <span style="color: #f8f8f2">unreachable</span><span style="color: #f92672">=</span><span style="color: #ae81ff">0</span>    <span style="color: #f8f8f2">failed</span><span style="color: #f92672">=</span>0
</pre></div>



  
<div class="prev-next-post pure-g">
  <div class="pure-u-1-24" style="text-align: left;">
    
    <a href="https://theargo.io/post/macbook_setup_using_ansible_and_homebrew/"><i class="fa fa-chevron-left"></i></a>
    
  </div>
  <div class="pure-u-10-24">
    
    <nav class="prev">
      <a href="https://theargo.io/post/macbook_setup_using_ansible_and_homebrew/">MacBook Setup Using Ansible and Homebrew</a>
    </nav>
    
  </div>
  <div class="pure-u-2-24">
    &nbsp;
  </div>
  <div class="pure-u-10-24">
    
  </div>
  <div class="pure-u-1-24" style="text-align: right;">
    
  </div>
</div>



  

</div>

</div>
</div>
<script src="https://theargo.io/js/ui.js"></script>


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-80255618-1', 'auto');
  ga('send', 'pageview');

</script>



</body>
</html>

